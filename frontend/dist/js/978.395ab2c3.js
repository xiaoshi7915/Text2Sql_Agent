"use strict";(self["webpackChunkwenshu_mcp_frontend"]=self["webpackChunkwenshu_mcp_frontend"]||[]).push([[978],{1978:function(e,l,a){a.r(l),a.d(l,{default:function(){return h}});var t=a(6768),o=a(4232);const r={class:"model-form-container"},m={class:"card-header"},u={class:"form-section-title"},n={key:3},d={class:"form-actions"};function s(e,l,a,s,i,p){const c=(0,t.g2)("el-input"),f=(0,t.g2)("el-form-item"),b=(0,t.g2)("el-option"),k=(0,t.g2)("el-select"),h=(0,t.g2)("el-switch"),v=(0,t.g2)("el-slider"),y=(0,t.g2)("el-input-number"),g=(0,t.g2)("el-radio"),V=(0,t.g2)("el-radio-group"),F=(0,t.g2)("icon-arrow-down"),_=(0,t.g2)("el-icon"),x=(0,t.g2)("icon-arrow-right"),w=(0,t.g2)("el-button"),C=(0,t.g2)("el-form"),L=(0,t.g2)("el-card"),T=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.bF)(L,null,{header:(0,t.k6)((()=>[(0,t.Lk)("div",m,[(0,t.Lk)("h3",null,(0,o.v_)(s.isEdit?"编辑模型":"新建模型"),1)])])),default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(C,{ref:"formRef",model:s.form,rules:s.rules,"label-width":"120px",class:"model-form"},{default:(0,t.k6)((()=>[l[26]||(l[26]=(0,t.Lk)("h4",{class:"form-section-title"},"基本信息",-1)),(0,t.bF)(f,{label:"模型名称",prop:"name"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:s.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>s.form.name=e),placeholder:"请输入模型名称"},null,8,["modelValue"])])),_:1}),(0,t.bF)(f,{label:"模型类型",prop:"type"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{modelValue:s.form.type,"onUpdate:modelValue":l[1]||(l[1]=e=>s.form.type=e),placeholder:"请选择模型类型",style:{width:"100%"},onChange:s.handleTypeChange},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.modelTypeOptions,(e=>((0,t.uX)(),(0,t.Wv)(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,t.bF)(f,{label:"模型版本",prop:"version"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:s.form.version,"onUpdate:modelValue":l[2]||(l[2]=e=>s.form.version=e),placeholder:"请输入模型版本，例如: 1.0.0"},null,8,["modelValue"])])),_:1}),(0,t.bF)(f,{label:"描述"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:s.form.description,"onUpdate:modelValue":l[3]||(l[3]=e=>s.form.description=e),type:"textarea",rows:4,placeholder:"请输入模型描述信息"},null,8,["modelValue"])])),_:1}),l[27]||(l[27]=(0,t.Lk)("h4",{class:"form-section-title"},"连接信息",-1)),(0,t.bF)(f,{label:"API端点",prop:"endpoint"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:s.form.endpoint,"onUpdate:modelValue":l[4]||(l[4]=e=>s.form.endpoint=e),placeholder:"请输入API端点，例如: https://api.example.com/v1/models"},null,8,["modelValue"])])),_:1}),(0,t.bF)(f,{label:"API密钥",prop:"apiKey"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{modelValue:s.form.apiKey,"onUpdate:modelValue":l[5]||(l[5]=e=>s.form.apiKey=e),type:"password",placeholder:"请输入API密钥","show-password":""},null,8,["modelValue"])])),_:1}),(0,t.bF)(f,{label:"状态"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:s.form.status,"onUpdate:modelValue":l[6]||(l[6]=e=>s.form.status=e),"active-value":"active","inactive-value":"offline","active-text":"活跃","inactive-text":"离线"},null,8,["modelValue"])])),_:1}),l[28]||(l[28]=(0,t.Lk)("h4",{class:"form-section-title"},"模型参数",-1)),"LLM"===s.form.type?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(f,{label:"温度",prop:"parameters.temperature"},{default:(0,t.k6)((()=>[(0,t.bF)(v,{modelValue:s.form.parameters.temperature,"onUpdate:modelValue":l[7]||(l[7]=e=>s.form.parameters.temperature=e),min:0,max:2,step:.1,"show-input":"","show-stops":"",marks:{0:"0",1:"1",2:"2"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(f,{label:"最大Token数",prop:"parameters.maxTokens"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{modelValue:s.form.parameters.maxTokens,"onUpdate:modelValue":l[8]||(l[8]=e=>s.form.parameters.maxTokens=e),min:1,max:32e3,style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(f,{label:"Top P",prop:"parameters.topP"},{default:(0,t.k6)((()=>[(0,t.bF)(v,{modelValue:s.form.parameters.topP,"onUpdate:modelValue":l[9]||(l[9]=e=>s.form.parameters.topP=e),min:0,max:1,step:.05,"show-input":"","show-stops":"",marks:{0:"0",.5:"0.5",1:"1"}},null,8,["modelValue"])])),_:1})],64)):"Extractor"===s.form.type?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.bF)(f,{label:"批处理大小",prop:"parameters.batchSize"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{modelValue:s.form.parameters.batchSize,"onUpdate:modelValue":l[10]||(l[10]=e=>s.form.parameters.batchSize=e),min:1,max:1e3,style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(f,{label:"超时(毫秒)",prop:"parameters.timeout"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{modelValue:s.form.parameters.timeout,"onUpdate:modelValue":l[11]||(l[11]=e=>s.form.parameters.timeout=e),min:1e3,max:6e4,step:1e3,style:{width:"100%"}},null,8,["modelValue"])])),_:1})],64)):"Optimizer"===s.form.type?((0,t.uX)(),(0,t.CE)(t.FK,{key:2},[(0,t.bF)(f,{label:"优化级别",prop:"parameters.optimizationLevel"},{default:(0,t.k6)((()=>[(0,t.bF)(V,{modelValue:s.form.parameters.optimizationLevel,"onUpdate:modelValue":l[12]||(l[12]=e=>s.form.parameters.optimizationLevel=e)},{default:(0,t.k6)((()=>[(0,t.bF)(g,{value:"low"},{default:(0,t.k6)((()=>l[19]||(l[19]=[(0,t.eW)("低 (速度优先)")]))),_:1}),(0,t.bF)(g,{value:"medium"},{default:(0,t.k6)((()=>l[20]||(l[20]=[(0,t.eW)("中 (平衡)")]))),_:1}),(0,t.bF)(g,{value:"high"},{default:(0,t.k6)((()=>l[21]||(l[21]=[(0,t.eW)("高 (质量优先)")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(f,{label:"启用缓存"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:s.form.parameters.enableCache,"onUpdate:modelValue":l[13]||(l[13]=e=>s.form.parameters.enableCache=e)},null,8,["modelValue"])])),_:1})],64)):(0,t.Q3)("",!0),(0,t.Lk)("h4",u,[(0,t.bF)(w,{link:"",type:"primary",onClick:l[14]||(l[14]=e=>s.showAdvanced=!s.showAdvanced)},{default:(0,t.k6)((()=>[s.showAdvanced?((0,t.uX)(),(0,t.Wv)(_,{key:0},{default:(0,t.k6)((()=>[(0,t.bF)(F)])),_:1})):((0,t.uX)(),(0,t.Wv)(_,{key:1},{default:(0,t.k6)((()=>[(0,t.bF)(x)])),_:1})),l[22]||(l[22]=(0,t.eW)(" 高级配置 "))])),_:1})]),s.showAdvanced?((0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(f,{label:"并发请求数"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{modelValue:s.form.concurrentRequests,"onUpdate:modelValue":l[15]||(l[15]=e=>s.form.concurrentRequests=e),min:1,max:50,style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,t.bF)(f,{label:"重试策略"},{default:(0,t.k6)((()=>[(0,t.bF)(k,{modelValue:s.form.retryStrategy,"onUpdate:modelValue":l[16]||(l[16]=e=>s.form.retryStrategy=e),placeholder:"请选择重试策略",style:{width:"100%"}},{default:(0,t.k6)((()=>[(0,t.bF)(b,{label:"无重试",value:"none"}),(0,t.bF)(b,{label:"固定延迟",value:"fixed"}),(0,t.bF)(b,{label:"指数退避",value:"exponential"})])),_:1},8,["modelValue"])])),_:1}),"none"!==s.form.retryStrategy?((0,t.uX)(),(0,t.Wv)(f,{key:0,label:"最大重试次数"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{modelValue:s.form.maxRetries,"onUpdate:modelValue":l[17]||(l[17]=e=>s.form.maxRetries=e),min:1,max:10,style:{width:"100%"}},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(f,{label:"请求超时(秒)"},{default:(0,t.k6)((()=>[(0,t.bF)(y,{modelValue:s.form.requestTimeout,"onUpdate:modelValue":l[18]||(l[18]=e=>s.form.requestTimeout=e),min:1,max:300,style:{width:"100%"}},null,8,["modelValue"])])),_:1})])):(0,t.Q3)("",!0),(0,t.Lk)("div",d,[(0,t.bF)(w,{onClick:s.handleCancel},{default:(0,t.k6)((()=>l[23]||(l[23]=[(0,t.eW)("取消")]))),_:1},8,["onClick"]),(0,t.bF)(w,{type:"primary",onClick:s.handleSubmit},{default:(0,t.k6)((()=>l[24]||(l[24]=[(0,t.eW)("保存")]))),_:1},8,["onClick"]),(0,t.bF)(w,{type:"success",onClick:s.handleTest},{default:(0,t.k6)((()=>l[25]||(l[25]=[(0,t.eW)("测试连接")]))),_:1},8,["onClick"])])])),_:1},8,["model","rules"])),[[T,s.loading]])])),_:1})])}a(4114),a(8111),a(7588);var i=a(144),p=a(1387),c=a(1219),f={name:"ModelForm",props:{id:{type:[String,Number],required:!1}},setup(e){const l=(0,p.lq)(),a=(0,p.rd)(),o=(0,i.KR)(null),r=(0,i.KR)(!1),m=(0,i.KR)(!1),u=(0,t.EW)((()=>!!e.id||!!l.params.id)),n=(0,t.EW)((()=>e.id||l.params.id)),d=[{value:"LLM",label:"大语言模型"},{value:"Extractor",label:"数据抽取器"},{value:"Optimizer",label:"查询优化器"}],s=(0,i.Kh)({name:"",type:"LLM",version:"1.0.0",description:"",endpoint:"",apiKey:"",status:"active",parameters:{temperature:.7,maxTokens:2048,topP:.95,batchSize:100,timeout:3e4,optimizationLevel:"medium",enableCache:!0},concurrentRequests:5,retryStrategy:"exponential",maxRetries:3,requestTimeout:30}),f={name:[{required:!0,message:"请输入模型名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择模型类型",trigger:"change"}],version:[{required:!0,message:"请输入模型版本",trigger:"blur"}],endpoint:[{required:!0,message:"请输入API端点",trigger:"blur"},{type:"url",message:"请输入有效的URL",trigger:"blur"}],apiKey:[{required:!u.value,message:"请输入API密钥",trigger:"blur"}]},b=e=>{"LLM"===e?s.endpoint||(s.endpoint="https://api.example.com/v1/completions"):"Extractor"===e?s.endpoint||(s.endpoint="http://localhost:8000/extract"):"Optimizer"===e&&(s.endpoint||(s.endpoint="http://localhost:8001/optimize"))},k=async()=>{if(u.value){r.value=!0;try{setTimeout((()=>{const e={id:n.value,name:"DeepSeek-SQL-7B",type:"LLM",version:"1.0.0",description:"基于DeepSeek-Coder的SQL生成模型，支持多种数据库方言",endpoint:"https://api.deepseek.com/v1/sql",apiKey:"",status:"active",parameters:{temperature:.7,maxTokens:2048,topP:.95},concurrentRequests:5,retryStrategy:"exponential",maxRetries:3,requestTimeout:30};Object.keys(s).forEach((l=>{"parameters"===l?Object.assign(s.parameters,e.parameters||{}):void 0!==e[l]&&(s[l]=e[l])})),r.value=!1}),500)}catch(e){console.error("获取模型详情失败",e),c.nk.error("获取模型详情失败"),r.value=!1}}},h=async()=>{o.value&&o.value.validate((async e=>{if(!e)return!1;r.value=!0;try{setTimeout((()=>{r.value=!1,(0,c.nk)({message:u.value?"模型更新成功":"模型创建成功",type:"success"}),a.push("/model/list")}),1e3)}catch(l){console.error("保存模型失败",l),c.nk.error("保存模型失败"),r.value=!1}}))},v=async()=>{o.value&&o.value.validate((async e=>{if(!e)return!1;r.value=!0;try{setTimeout((()=>{r.value=!1;const e=Math.random()>.3;e?(0,c.nk)({message:"模型连接成功，响应时间: 235ms",type:"success"}):(0,c.nk)({message:"模型连接失败，请检查端点或API密钥",type:"error"})}),1500)}catch(l){console.error("测试连接失败",l),c.nk.error("测试连接失败"),r.value=!1}}))},y=()=>{a.push("/model/list")};return(0,t.sV)((()=>{k()})),{formRef:o,loading:r,isEdit:u,form:s,rules:f,modelTypeOptions:d,showAdvanced:m,handleTypeChange:b,handleSubmit:h,handleTest:v,handleCancel:y}}},b=a(1241);const k=(0,b.A)(f,[["render",s],["__scopeId","data-v-2e7cf0c1"]]);var h=k}}]);
//# sourceMappingURL=978.395ab2c3.js.map