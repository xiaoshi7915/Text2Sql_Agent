"use strict";(self["webpackChunkwenshu_mcp_frontend"]=self["webpackChunkwenshu_mcp_frontend"]||[]).push([[481],{8481:function(e,t,n){n.r(t),n.d(t,{default:function(){return Qn}});var s=n(6768),r=n(4232),i=n(5130);const a={class:"chat-container"},o={class:"session-list-panel"},l={class:"panel-header"},c={class:"search-box"},u={class:"session-list"},p=["onClick"],h={class:"session-icon"},d={class:"session-info"},m={class:"session-title"},g={class:"session-meta"},f={class:"session-time"},k={class:"session-count"},b={class:"session-actions"},x={class:"chat-panel"},w={class:"chat-header"},y={class:"session-title"},T={class:"toolbar"},v={class:"message-container",ref:"messageContainer"},S={key:0,class:"empty-state"},_={class:"empty-icon"},A={class:"message-avatar"},R={class:"message-content"},E={class:"message-header"},C={class:"message-sender"},L={class:"message-time"},I=["innerHTML"],D={key:0,class:"message-actions"},N={key:0,class:"typing-indicator"},M={class:"input-container"},z={class:"toolbar"},F={class:"input-area"},$={class:"datasource-selector"},O={class:"datasource-info"},P={class:"datasource-name"},U={class:"datasource-type"},B={class:"drawer-footer"},H={class:"model-selector"},q={class:"model-info"},V={class:"model-name"},Z={class:"model-type"},W={class:"drawer-footer"},G={class:"dialog-footer"};function j(e,t,n,j,K,X){const Y=(0,s.g2)("icon-plus"),Q=(0,s.g2)("el-icon"),J=(0,s.g2)("el-button"),ee=(0,s.g2)("icon-search"),te=(0,s.g2)("el-input"),ne=(0,s.g2)("icon-chat-dot-round"),se=(0,s.g2)("icon-more"),re=(0,s.g2)("el-dropdown-item"),ie=(0,s.g2)("el-dropdown-menu"),ae=(0,s.g2)("el-dropdown"),oe=(0,s.g2)("icon-data-line"),le=(0,s.g2)("el-tooltip"),ce=(0,s.g2)("icon-monitor"),ue=(0,s.g2)("icon-delete"),pe=(0,s.g2)("icon-chat-square"),he=(0,s.g2)("icon-user"),de=(0,s.g2)("icon-cpu"),me=(0,s.g2)("el-avatar"),ge=(0,s.g2)("icon-document-copy"),fe=(0,s.g2)("icon-thumb-up"),ke=(0,s.g2)("icon-thumb-down"),be=(0,s.g2)("icon-upload"),xe=(0,s.g2)("icon-microphone"),we=(0,s.g2)("icon-position"),ye=(0,s.g2)("el-checkbox"),Te=(0,s.g2)("el-checkbox-group"),ve=(0,s.g2)("el-drawer"),Se=(0,s.g2)("el-radio"),_e=(0,s.g2)("el-radio-group"),Ae=(0,s.g2)("el-dialog");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.Lk)("div",o,[(0,s.Lk)("div",l,[t[14]||(t[14]=(0,s.Lk)("h3",null,"会话列表",-1)),(0,s.bF)(J,{type:"primary",size:"small",onClick:j.createNewSession},{default:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(Y)])),_:1}),t[13]||(t[13]=(0,s.Lk)("span",null,"新建会话",-1))])),_:1},8,["onClick"])]),(0,s.Lk)("div",c,[(0,s.bF)(te,{modelValue:j.searchKeyword,"onUpdate:modelValue":t[0]||(t[0]=e=>j.searchKeyword=e),placeholder:"搜索会话",clearable:""},{prefix:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(ee)])),_:1})])),_:1},8,["modelValue"])]),(0,s.Lk)("div",u,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.filteredSessions,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,r.C4)(["session-item",{active:e.id===j.currentSession.id}]),onClick:t=>j.switchSession(e)},[(0,s.Lk)("div",h,[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(ne)])),_:1})]),(0,s.Lk)("div",d,[(0,s.Lk)("div",m,(0,r.v_)(e.title),1),(0,s.Lk)("div",g,[(0,s.Lk)("span",f,(0,r.v_)(j.formatDate(e.updatedAt)),1),(0,s.Lk)("span",k,(0,r.v_)(e.messageCount)+"条",1)])]),(0,s.Lk)("div",b,[(0,s.bF)(ae,{trigger:"click",onCommand:t=>j.handleSessionAction(t,e)},{dropdown:(0,s.k6)((()=>[(0,s.bF)(ie,null,{default:(0,s.k6)((()=>[(0,s.bF)(re,{command:"rename"},{default:(0,s.k6)((()=>t[15]||(t[15]=[(0,s.eW)("重命名")]))),_:1}),(0,s.bF)(re,{command:"export"},{default:(0,s.k6)((()=>t[16]||(t[16]=[(0,s.eW)("导出")]))),_:1}),(0,s.bF)(re,{command:"delete",divided:""},{default:(0,s.k6)((()=>t[17]||(t[17]=[(0,s.eW)("删除")]))),_:1})])),_:1})])),default:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(se)])),_:1})])),_:2},1032,["onCommand"])])],10,p)))),128))])]),(0,s.Lk)("div",x,[(0,s.Lk)("div",w,[(0,s.Lk)("div",y,(0,r.v_)(j.currentSession.title),1),(0,s.Lk)("div",T,[(0,s.bF)(le,{content:"配置数据源"},{default:(0,s.k6)((()=>[(0,s.bF)(J,{circle:"",onClick:t[1]||(t[1]=e=>j.showDataSourcePanel=!0)},{default:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(oe)])),_:1})])),_:1})])),_:1}),(0,s.bF)(le,{content:"选择模型"},{default:(0,s.k6)((()=>[(0,s.bF)(J,{circle:"",onClick:t[2]||(t[2]=e=>j.showModelPanel=!0)},{default:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(ce)])),_:1})])),_:1})])),_:1}),(0,s.bF)(le,{content:"清空会话"},{default:(0,s.k6)((()=>[(0,s.bF)(J,{circle:"",onClick:j.clearMessages},{default:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(ue)])),_:1})])),_:1},8,["onClick"])])),_:1})])]),(0,s.Lk)("div",v,[0===j.currentSession.messages.length?((0,s.uX)(),(0,s.CE)("div",S,[(0,s.Lk)("div",_,[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(pe)])),_:1})]),t[18]||(t[18]=(0,s.Lk)("div",{class:"empty-text"},"暂无消息，开始新的对话吧",-1))])):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.currentSession.messages,((e,n)=>((0,s.uX)(),(0,s.CE)("div",{key:n,class:(0,r.C4)(["message-wrapper",{"user-message":"user"===e.role,"ai-message":"assistant"===e.role}])},[(0,s.Lk)("div",A,[(0,s.bF)(me,null,{default:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>["user"===e.role?((0,s.uX)(),(0,s.Wv)(he,{key:0})):((0,s.uX)(),(0,s.Wv)(de,{key:1}))])),_:2},1024)])),_:2},1024)]),(0,s.Lk)("div",R,[(0,s.Lk)("div",E,[(0,s.Lk)("span",C,(0,r.v_)("user"===e.role?"用户":"智能体"),1),(0,s.Lk)("span",L,(0,r.v_)(j.formatTime(e.timestamp)),1)]),(0,s.Lk)("div",{class:"message-body",innerHTML:j.formatMessage(e.content)},null,8,I),"assistant"===e.role?((0,s.uX)(),(0,s.CE)("div",D,[(0,s.bF)(J,{text:"",type:"primary",size:"small",onClick:t=>j.copyMessage(e)},{default:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(ge)])),_:1}),t[19]||(t[19]=(0,s.Lk)("span",null,"复制",-1))])),_:2},1032,["onClick"]),(0,s.bF)(J,{text:"",type:"primary",size:"small",onClick:t=>j.rateMessage(e,"like")},{default:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(fe)])),_:1}),t[20]||(t[20]=(0,s.Lk)("span",null,"有用",-1))])),_:2},1032,["onClick"]),(0,s.bF)(J,{text:"",type:"danger",size:"small",onClick:t=>j.rateMessage(e,"dislike")},{default:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(ke)])),_:1}),t[21]||(t[21]=(0,s.Lk)("span",null,"无用",-1))])),_:2},1032,["onClick"])])):(0,s.Q3)("",!0)])],2)))),128)),j.isTyping?((0,s.uX)(),(0,s.CE)("div",N,t[22]||(t[22]=[(0,s.Lk)("span",{class:"dot"},null,-1),(0,s.Lk)("span",{class:"dot"},null,-1),(0,s.Lk)("span",{class:"dot"},null,-1)]))):(0,s.Q3)("",!0)],64))],512),(0,s.Lk)("div",M,[(0,s.Lk)("div",z,[(0,s.bF)(le,{content:"上传文件"},{default:(0,s.k6)((()=>[(0,s.bF)(J,{circle:"",onClick:j.uploadFile},{default:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(be)])),_:1})])),_:1},8,["onClick"])])),_:1}),(0,s.bF)(le,{content:"语音输入"},{default:(0,s.k6)((()=>[(0,s.bF)(J,{circle:"",onClick:j.toggleVoiceInput},{default:(0,s.k6)((()=>[(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(xe)])),_:1})])),_:1},8,["onClick"])])),_:1})]),(0,s.Lk)("div",F,[(0,s.bF)(te,{modelValue:j.messageInput,"onUpdate:modelValue":t[3]||(t[3]=e=>j.messageInput=e),type:"textarea",rows:4,placeholder:"输入您的问题...",resize:"none",onKeydown:(0,i.jR)((0,i.D$)(j.sendMessage,["ctrl","prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),(0,s.bF)(J,{type:"primary",disabled:!j.messageInput.trim(),onClick:j.sendMessage},{default:(0,s.k6)((()=>[t[23]||(t[23]=(0,s.eW)(" 发送 ")),(0,s.bF)(Q,null,{default:(0,s.k6)((()=>[(0,s.bF)(we)])),_:1})])),_:1},8,["disabled","onClick"])]),t[24]||(t[24]=(0,s.Lk)("div",{class:"input-tips"}," 按 Ctrl + Enter 发送消息 ",-1))])]),(0,s.bF)(ve,{modelValue:j.showDataSourcePanel,"onUpdate:modelValue":t[6]||(t[6]=e=>j.showDataSourcePanel=e),title:"选择数据源",direction:"rtl",size:"30%"},{footer:(0,s.k6)((()=>[(0,s.Lk)("div",B,[(0,s.bF)(J,{onClick:t[5]||(t[5]=e=>j.showDataSourcePanel=!1)},{default:(0,s.k6)((()=>t[25]||(t[25]=[(0,s.eW)("取消")]))),_:1}),(0,s.bF)(J,{type:"primary",onClick:j.confirmDataSources},{default:(0,s.k6)((()=>t[26]||(t[26]=[(0,s.eW)("确认")]))),_:1},8,["onClick"])])])),default:(0,s.k6)((()=>[(0,s.Lk)("div",$,[(0,s.bF)(Te,{modelValue:j.selectedDataSources,"onUpdate:modelValue":t[4]||(t[4]=e=>j.selectedDataSources=e)},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.availableDataSources,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"datasource-item"},[(0,s.bF)(ye,{value:e.id},{default:(0,s.k6)((()=>[(0,s.Lk)("div",O,[(0,s.Lk)("div",P,(0,r.v_)(e.name),1),(0,s.Lk)("div",U,(0,r.v_)(e.type),1)])])),_:2},1032,["value"])])))),128))])),_:1},8,["modelValue"])])])),_:1},8,["modelValue"]),(0,s.bF)(ve,{modelValue:j.showModelPanel,"onUpdate:modelValue":t[9]||(t[9]=e=>j.showModelPanel=e),title:"选择模型",direction:"rtl",size:"30%"},{footer:(0,s.k6)((()=>[(0,s.Lk)("div",W,[(0,s.bF)(J,{onClick:t[8]||(t[8]=e=>j.showModelPanel=!1)},{default:(0,s.k6)((()=>t[27]||(t[27]=[(0,s.eW)("取消")]))),_:1}),(0,s.bF)(J,{type:"primary",onClick:j.confirmModel},{default:(0,s.k6)((()=>t[28]||(t[28]=[(0,s.eW)("确认")]))),_:1},8,["onClick"])])])),default:(0,s.k6)((()=>[(0,s.Lk)("div",H,[(0,s.bF)(_e,{modelValue:j.selectedModel,"onUpdate:modelValue":t[7]||(t[7]=e=>j.selectedModel=e)},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(j.availableModels,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"model-item"},[(0,s.bF)(Se,{value:e.id},{default:(0,s.k6)((()=>[(0,s.Lk)("div",q,[(0,s.Lk)("div",V,(0,r.v_)(e.name),1),(0,s.Lk)("div",Z,(0,r.v_)(e.type),1)])])),_:2},1032,["value"])])))),128))])),_:1},8,["modelValue"])])])),_:1},8,["modelValue"]),(0,s.bF)(Ae,{modelValue:j.renameDialogVisible,"onUpdate:modelValue":t[12]||(t[12]=e=>j.renameDialogVisible=e),title:"重命名会话",width:"30%"},{footer:(0,s.k6)((()=>[(0,s.Lk)("span",G,[(0,s.bF)(J,{onClick:t[11]||(t[11]=e=>j.renameDialogVisible=!1)},{default:(0,s.k6)((()=>t[29]||(t[29]=[(0,s.eW)("取消")]))),_:1}),(0,s.bF)(J,{type:"primary",onClick:j.confirmRename},{default:(0,s.k6)((()=>t[30]||(t[30]=[(0,s.eW)("确认")]))),_:1},8,["onClick"])])])),default:(0,s.k6)((()=>[(0,s.bF)(te,{modelValue:j.newSessionTitle,"onUpdate:modelValue":t[10]||(t[10]=e=>j.newSessionTitle=e),placeholder:"请输入新的会话名称"},null,8,["modelValue"])])),_:1},8,["modelValue"])])}n(4114),n(8111),n(2489);var K=n(144),X=n(1387),Y=n(1219),Q=n(2933);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function ee(e,t){if("object"!=J(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=J(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function te(e){var t=ee(e,"string");return"symbol"==J(t)?t:t+""}function ne(e,t,n){return(t=te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(7588),n(1701),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);function se(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let re=se();function ie(e){re=e}const ae={exec:()=>null};function oe(e,t=""){let n="string"===typeof e?e:e.source;const s={replace:(e,t)=>{let r="string"===typeof t?t:t.source;return r=r.replace(le.caret,"$1"),n=n.replace(e,r),s},getRegex:()=>new RegExp(n,t)};return s}const le={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},ce=/^(?:[ \t]*(?:\n|$))+/,ue=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,pe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,he=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,de=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,me=/(?:[*+-]|\d{1,9}[.)])/,ge=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,fe=oe(ge).replace(/bull/g,me).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ke=oe(ge).replace(/bull/g,me).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),be=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,xe=/^[^\n]+/,we=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ye=oe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",we).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Te=oe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,me).getRegex(),ve="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Se=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,_e=oe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",Se).replace("tag",ve).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ae=oe(be).replace("hr",he).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ve).getRegex(),Re=oe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ae).getRegex(),Ee={blockquote:Re,code:ue,def:ye,fences:pe,heading:de,hr:he,html:_e,lheading:fe,list:Te,newline:ce,paragraph:Ae,table:ae,text:xe},Ce=oe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",he).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ve).getRegex(),Le={...Ee,lheading:ke,table:Ce,paragraph:oe(be).replace("hr",he).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ce).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ve).getRegex()},Ie={...Ee,html:oe("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Se).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ae,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:oe(be).replace("hr",he).replace("heading"," *#{1,6} *[^\n]").replace("lheading",fe).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},De=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ne=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Me=/^( {2,}|\\)\n(?!\s*$)/,ze=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Fe=/[\p{P}\p{S}]/u,$e=/[\s\p{P}\p{S}]/u,Oe=/[^\s\p{P}\p{S}]/u,Pe=oe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,$e).getRegex(),Ue=/(?!~)[\p{P}\p{S}]/u,Be=/(?!~)[\s\p{P}\p{S}]/u,He=/(?:[^\s\p{P}\p{S}]|~)/u,qe=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Ve=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Ze=oe(Ve,"u").replace(/punct/g,Fe).getRegex(),We=oe(Ve,"u").replace(/punct/g,Ue).getRegex(),Ge="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",je=oe(Ge,"gu").replace(/notPunctSpace/g,Oe).replace(/punctSpace/g,$e).replace(/punct/g,Fe).getRegex(),Ke=oe(Ge,"gu").replace(/notPunctSpace/g,He).replace(/punctSpace/g,Be).replace(/punct/g,Ue).getRegex(),Xe=oe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Oe).replace(/punctSpace/g,$e).replace(/punct/g,Fe).getRegex(),Ye=oe(/\\(punct)/,"gu").replace(/punct/g,Fe).getRegex(),Qe=oe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Je=oe(Se).replace("(?:--\x3e|$)","--\x3e").getRegex(),et=oe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Je).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),tt=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,nt=oe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",tt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),st=oe(/^!?\[(label)\]\[(ref)\]/).replace("label",tt).replace("ref",we).getRegex(),rt=oe(/^!?\[(ref)\](?:\[\])?/).replace("ref",we).getRegex(),it=oe("reflink|nolink(?!\\()","g").replace("reflink",st).replace("nolink",rt).getRegex(),at={_backpedal:ae,anyPunctuation:Ye,autolink:Qe,blockSkip:qe,br:Me,code:Ne,del:ae,emStrongLDelim:Ze,emStrongRDelimAst:je,emStrongRDelimUnd:Xe,escape:De,link:nt,nolink:rt,punctuation:Pe,reflink:st,reflinkSearch:it,tag:et,text:ze,url:ae},ot={...at,link:oe(/^!?\[(label)\]\((.*?)\)/).replace("label",tt).getRegex(),reflink:oe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",tt).getRegex()},lt={...at,emStrongRDelimAst:Ke,emStrongLDelim:We,url:oe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ct={...lt,br:oe(Me).replace("{2,}","*").getRegex(),text:oe(lt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ut={normal:Ee,gfm:Le,pedantic:Ie},pt={normal:at,gfm:lt,breaks:ct,pedantic:ot},ht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dt=e=>ht[e];function mt(e,t){if(t){if(le.escapeTest.test(e))return e.replace(le.escapeReplace,dt)}else if(le.escapeTestNoEncode.test(e))return e.replace(le.escapeReplaceNoEncode,dt);return e}function gt(e){try{e=encodeURI(e).replace(le.percentDecode,"%")}catch{return null}return e}function ft(e,t){const n=e.replace(le.findPipe,((e,t,n)=>{let s=!1,r=t;while(--r>=0&&"\\"===n[r])s=!s;return s?"|":" |"})),s=n.split(le.splitPipe);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),t)if(s.length>t)s.splice(t);else while(s.length<t)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(le.slashPipe,"|");return s}function kt(e,t,n){const s=e.length;if(0===s)return"";let r=0;while(r<s){const n=e.charAt(s-r-1);if(n!==t)break;r++}return e.slice(0,s-r)}function bt(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let s=0;s<e.length;s++)if("\\"===e[s])s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return n>0?-2:-1}function xt(e,t,n,s,r){const i=t.href,a=t.title||null,o=e[1].replace(r.other.outputLinkReplace,"$1");if("!"!==e[0].charAt(0)){s.state.inLink=!0;const e={type:"link",raw:n,href:i,title:a,text:o,tokens:s.inlineTokens(o)};return s.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:a,text:o}}function wt(e,t,n){const s=e.match(n.other.indentCodeCompensation);if(null===s)return t;const r=s[1];return t.split("\n").map((e=>{const t=e.match(n.other.beginningSpace);if(null===t)return e;const[s]=t;return s.length>=r.length?e.slice(r.length):e})).join("\n")}class yt{constructor(e){ne(this,"options",void 0),ne(this,"rules",void 0),ne(this,"lexer",void 0),this.options=e||re}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:kt(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=wt(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){const t=kt(e,"#");this.options.pedantic?e=t.trim():t&&!this.rules.other.endingSpaceChar.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:kt(t[0],"\n")}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=kt(t[0],"\n").split("\n"),n="",s="";const r=[];while(e.length>0){let t=!1;const i=[];let a;for(a=0;a<e.length;a++)if(this.rules.other.blockquoteStart.test(e[a]))i.push(e[a]),t=!0;else{if(t)break;i.push(e[a])}e=e.slice(a);const o=i.join("\n"),l=o.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}\n${o}`:o,s=s?`${s}\n${l}`:l;const c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,r,!0),this.lexer.state.top=c,0===e.length)break;const u=r.at(-1);if("code"===u?.type)break;if("blockquote"===u?.type){const t=u,i=t.raw+"\n"+e.join("\n"),a=this.blockquote(i);r[r.length-1]=a,n=n.substring(0,n.length-t.raw.length)+a.raw,s=s.substring(0,s.length-t.text.length)+a.text;break}if("list"!==u?.type);else{const t=u,i=t.raw+"\n"+e.join("\n"),a=this.list(i);r[r.length-1]=a,n=n.substring(0,n.length-u.raw.length)+a.raw,s=s.substring(0,s.length-t.raw.length)+a.raw,e=i.substring(r.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:r,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,r={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const i=this.rules.other.listItemRegex(n);let a=!1;while(e){let n=!1,s="",o="";if(!(t=i.exec(e)))break;if(this.rules.block.hr.test(e))break;s=t[0],e=e.substring(s.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],u=!l.trim(),p=0;if(this.options.pedantic?(p=2,o=l.trimStart()):u?p=t[1].length+1:(p=t[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,o=l.slice(p),p+=t[1].length),u&&this.rules.other.blankLine.test(c)&&(s+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=this.rules.other.nextBulletRegex(p),n=this.rules.other.hrRegex(p),r=this.rules.other.fencesBeginRegex(p),i=this.rules.other.headingBeginRegex(p),a=this.rules.other.htmlBeginRegex(p);while(e){const h=e.split("\n",1)[0];let d;if(c=h,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),d=c):d=c.replace(this.rules.other.tabCharGlobal,"    "),r.test(c))break;if(i.test(c))break;if(a.test(c))break;if(t.test(c))break;if(n.test(c))break;if(d.search(this.rules.other.nonSpaceChar)>=p||!c.trim())o+="\n"+d.slice(p);else{if(u)break;if(l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(r.test(l))break;if(i.test(l))break;if(n.test(l))break;o+="\n"+c}u||c.trim()||(u=!0),s+=h+"\n",e=e.substring(h.length+1),l=d.slice(p)}}r.loose||(a?r.loose=!0:this.rules.other.doubleBlankLine.test(s)&&(a=!0));let h,d=null;this.options.gfm&&(d=this.rules.other.listIsTask.exec(o),d&&(h="[ ] "!==d[0],o=o.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:s,task:!!d,checked:h,loose:!1,text:o,tokens:[]}),r.raw+=s}const o=r.items.at(-1);if(!o)return;o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd(),r.raw=r.raw.trimEnd();for(let e=0;e<r.items.length;e++)if(this.lexer.state.top=!1,r.items[e].tokens=this.lexer.blockTokens(r.items[e].text,[]),!r.loose){const t=r.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>this.rules.other.anyLine.test(e.raw)));r.loose=n}if(r.loose)for(let e=0;e<r.items.length;e++)r.items[e].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]};return e}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!this.rules.other.tableDelimiter.test(t[2]))return;const n=ft(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const e of s)this.rules.other.tableAlignRight.test(e)?i.align.push("right"):this.rules.other.tableAlignCenter.test(e)?i.align.push("center"):this.rules.other.tableAlignLeft.test(e)?i.align.push("left"):i.align.push(null);for(let e=0;e<n.length;e++)i.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:i.align[e]});for(const e of r)i.rows.push(ft(e,i.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:i.align[t]}))));return i}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;const t=kt(e.slice(0,-1),"\\");if((e.length-t.length)%2===0)return}else{const e=bt(t[2],"()");if(-2===e)return;if(e>-1){const n=0===t[0].indexOf("!")?5:4,s=n+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,s).trim(),t[3]=""}}let n=t[2],s="";if(this.options.pedantic){const e=this.rules.other.pedanticHrefTitle.exec(n);e&&(n=e[1],s=e[3])}else s=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?n.slice(1):n.slice(1,-1)),xt(t,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:s?s.replace(this.rules.inline.anyPunctuation,"$1"):s},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const e=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=t[e.toLowerCase()];if(!s){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return xt(n,s,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s)return;if(s[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;const r=s[1]||s[2]||"";if(!r||!n||this.rules.inline.punctuation.exec(n)){const n=[...s[0]].length-1;let r,i,a=n,o=0;const l="*"===s[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;l.lastIndex=0,t=t.slice(-1*e.length+n);while(null!=(s=l.exec(t))){if(r=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!r)continue;if(i=[...r].length,s[3]||s[4]){a+=i;continue}if((s[5]||s[6])&&n%3&&!((n+i)%3)){o+=i;continue}if(a-=i,a>0)continue;i=Math.min(i,i+a+o);const t=[...s[0]][0].length,l=e.slice(0,n+s.index+t+i);if(Math.min(n,i)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," ");const n=this.rules.other.nonSpaceChar.test(e),s=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return n&&s&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=t[1],n="mailto:"+e):(e=t[1],n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=t[0],n="mailto:"+e;else{let s;do{s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(s!==t[0]);e=t[0],n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}}class Tt{constructor(e){ne(this,"tokens",void 0),ne(this,"options",void 0),ne(this,"state",void 0),ne(this,"tokenizer",void 0),ne(this,"inlineQueue",void 0),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||re,this.options.tokenizer=this.options.tokenizer||new yt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:le,block:ut.normal,inline:pt.normal};this.options.pedantic?(t.block=ut.pedantic,t.inline=pt.pedantic):this.options.gfm&&(t.block=ut.gfm,this.options.breaks?t.inline=pt.breaks:t.inline=pt.gfm),this.tokenizer.rules=t}static get rules(){return{block:ut,inline:pt}}static lex(e,t){const n=new Tt(t);return n.lex(e)}static lexInline(e,t){const n=new Tt(t);return n.inlineTokens(e)}lex(e){e=e.replace(le.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){this.options.pedantic&&(e=e.replace(le.tabCharGlobal,"    ").replace(le.spaceLine,""));while(e){let s;if(this.options.extensions?.block?.some((n=>!!(s=n.call({lexer:this},e,t))&&(e=e.substring(s.raw.length),t.push(s),!0))))continue;if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length);const n=t.at(-1);1===s.raw.length&&void 0!==n?n.raw+="\n":t.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length);const n=t.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+="\n"+s.raw,n.text+="\n"+s.text,this.inlineQueue.at(-1).src=n.text):t.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length);const n=t.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+="\n"+s.raw,n.text+="\n"+s.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),t.push(s);continue}let r=e;if(this.options.extensions?.startBlock){let t=1/0;const n=e.slice(1);let s;this.options.extensions.startBlock.forEach((e=>{s=e.call({lexer:this},n),"number"===typeof s&&s>=0&&(t=Math.min(t,s))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}if(this.state.top&&(s=this.tokenizer.paragraph(r))){const i=t.at(-1);n&&"paragraph"===i?.type?(i.raw+="\n"+s.raw,i.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):t.push(s),n=r.length!==e.length,e=e.substring(s.raw.length)}else if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length);const n=t.at(-1);"text"===n?.type?(n.raw+="\n"+s.raw,n.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):t.push(s)}else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,s=null;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)while(null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(n)))e.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}while(null!=(s=this.tokenizer.rules.inline.anyPunctuation.exec(n)))n=n.slice(0,s.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);while(null!=(s=this.tokenizer.rules.inline.blockSkip.exec(n)))n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let r=!1,i="";while(e){let s;if(r||(i=""),r=!1,this.options.extensions?.inline?.some((n=>!!(s=n.call({lexer:this},e,t))&&(e=e.substring(s.raw.length),t.push(s),!0))))continue;if(s=this.tokenizer.escape(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.tag(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.link(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(s.raw.length);const n=t.at(-1);"text"===s.type&&"text"===n?.type?(n.raw+=s.raw,n.text+=s.text):t.push(s);continue}if(s=this.tokenizer.emStrong(e,n,i)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.codespan(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.br(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.del(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.autolink(e)){e=e.substring(s.raw.length),t.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(e))){e=e.substring(s.raw.length),t.push(s);continue}let a=e;if(this.options.extensions?.startInline){let t=1/0;const n=e.slice(1);let s;this.options.extensions.startInline.forEach((e=>{s=e.call({lexer:this},n),"number"===typeof s&&s>=0&&(t=Math.min(t,s))})),t<1/0&&t>=0&&(a=e.substring(0,t+1))}if(s=this.tokenizer.inlineText(a)){e=e.substring(s.raw.length),"_"!==s.raw.slice(-1)&&(i=s.raw.slice(-1)),r=!0;const n=t.at(-1);"text"===n?.type?(n.raw+=s.raw,n.text+=s.text):t.push(s)}else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}}class vt{constructor(e){ne(this,"options",void 0),ne(this,"parser",void 0),this.options=e||re}space(e){return""}code({text:e,lang:t,escaped:n}){const s=(t||"").match(le.notSpaceStart)?.[0],r=e.replace(le.endingNewline,"")+"\n";return s?'<pre><code class="language-'+mt(s)+'">'+(n?r:mt(r,!0))+"</code></pre>\n":"<pre><code>"+(n?r:mt(r,!0))+"</code></pre>\n"}blockquote({tokens:e}){const t=this.parser.parse(e);return`<blockquote>\n${t}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){const t=e.ordered,n=e.start;let s="";for(let a=0;a<e.items.length;a++){const t=e.items[a];s+=this.listitem(t)}const r=t?"ol":"ul",i=t&&1!==n?' start="'+n+'"':"";return"<"+r+i+">\n"+s+"</"+r+">\n"}listitem(e){let t="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===e.tokens[0]?.type?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+" "+mt(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",n="";for(let r=0;r<e.header.length;r++)n+=this.tablecell(e.header[r]);t+=this.tablerow({text:n});let s="";for(let r=0;r<e.rows.length;r++){const t=e.rows[r];n="";for(let e=0;e<t.length;e++)n+=this.tablecell(t[e]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+s+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td",s=e.align?`<${n} align="${e.align}">`:`<${n}>`;return s+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${mt(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const s=this.parser.parseInline(n),r=gt(e);if(null===r)return s;e=r;let i='<a href="'+e+'"';return t&&(i+=' title="'+mt(t)+'"'),i+=">"+s+"</a>",i}image({href:e,title:t,text:n}){const s=gt(e);if(null===s)return mt(n);e=s;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${mt(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:mt(e.text)}}class St{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class _t{constructor(e){ne(this,"options",void 0),ne(this,"renderer",void 0),ne(this,"textRenderer",void 0),this.options=e||re,this.options.renderer=this.options.renderer||new vt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new St}static parse(e,t){const n=new _t(t);return n.parse(e)}static parseInline(e,t){const n=new _t(t);return n.parseInline(e)}parse(e,t=!0){let n="";for(let s=0;s<e.length;s++){const r=e[s];if(this.options.extensions?.renderers?.[r.type]){const e=r,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}const i=r;switch(i.type){case"space":n+=this.renderer.space(i);continue;case"hr":n+=this.renderer.hr(i);continue;case"heading":n+=this.renderer.heading(i);continue;case"code":n+=this.renderer.code(i);continue;case"table":n+=this.renderer.table(i);continue;case"blockquote":n+=this.renderer.blockquote(i);continue;case"list":n+=this.renderer.list(i);continue;case"html":n+=this.renderer.html(i);continue;case"paragraph":n+=this.renderer.paragraph(i);continue;case"text":{let r=i,a=this.renderer.text(r);while(s+1<e.length&&"text"===e[s+1].type)r=e[++s],a+="\n"+this.renderer.text(r);n+=t?this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):a;continue}default:{const e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t=this.renderer){let n="";for(let s=0;s<e.length;s++){const r=e[s];if(this.options.extensions?.renderers?.[r.type]){const e=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=e||"";continue}}const i=r;switch(i.type){case"escape":n+=t.text(i);break;case"html":n+=t.html(i);break;case"link":n+=t.link(i);break;case"image":n+=t.image(i);break;case"strong":n+=t.strong(i);break;case"em":n+=t.em(i);break;case"codespan":n+=t.codespan(i);break;case"br":n+=t.br(i);break;case"del":n+=t.del(i);break;case"text":n+=t.text(i);break;default:{const e='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class At{constructor(e){ne(this,"options",void 0),ne(this,"block",void 0),this.options=e||re}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Tt.lex:Tt.lexInline}provideParser(){return this.block?_t.parse:_t.parseInline}}ne(At,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Rt{constructor(...e){ne(this,"defaults",se()),ne(this,"options",this.setOptions),ne(this,"parse",this.parseMarkdown(!0)),ne(this,"parseInline",this.parseMarkdown(!1)),ne(this,"Parser",_t),ne(this,"Renderer",vt),ne(this,"TextRenderer",St),ne(this,"Lexer",Tt),ne(this,"Tokenizer",yt),ne(this,"Hooks",At),this.use(...e)}walkTokens(e,t){let n=[];for(const s of e)switch(n=n.concat(t.call(this,s)),s.type){case"table":{const e=s;for(const s of e.header)n=n.concat(this.walkTokens(s.tokens,t));for(const s of e.rows)for(const e of s)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=s;n=n.concat(this.walkTokens(e.items,t));break}default:{const e=s;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((s=>{const r=e[s].flat(1/0);n=n.concat(this.walkTokens(r,t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let s=e.renderer.apply(this,t);return!1===s&&(s=n.apply(this,t)),s}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=this.defaults.renderer||new vt(this.defaults);for(const n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const s=n,r=e.renderer[s],i=t[s];t[s]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new yt(this.defaults);for(const n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const s=n,r=e.tokenizer[s],i=t[s];t[s]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new At;for(const n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;const s=n,r=e.hooks[s],i=t[s];At.passThroughHooks.has(n)?t[s]=e=>{if(this.defaults.async)return Promise.resolve(r.call(t,e)).then((e=>i.call(t,e)));const n=r.call(t,e);return i.call(t,n)}:t[s]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=i.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,s=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(s.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Tt.lex(e,t??this.defaults)}parser(e,t){return _t.parse(e,t??this.defaults)}parseMarkdown(e){const t=(t,n)=>{const s={...n},r={...this.defaults,...s},i=this.onError(!!r.silent,!!r.async);if(!0===this.defaults.async&&!1===s.async)return i(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if("undefined"===typeof t||null===t)return i(new Error("marked(): input parameter is undefined or null"));if("string"!==typeof t)return i(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));r.hooks&&(r.hooks.options=r,r.hooks.block=e);const a=r.hooks?r.hooks.provideLexer():e?Tt.lex:Tt.lexInline,o=r.hooks?r.hooks.provideParser():e?_t.parse:_t.parseInline;if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(t):t).then((e=>a(e,r))).then((e=>r.hooks?r.hooks.processAllTokens(e):e)).then((e=>r.walkTokens?Promise.all(this.walkTokens(e,r.walkTokens)).then((()=>e)):e)).then((e=>o(e,r))).then((e=>r.hooks?r.hooks.postprocess(e):e)).catch(i);try{r.hooks&&(t=r.hooks.preprocess(t));let e=a(t,r);r.hooks&&(e=r.hooks.processAllTokens(e)),r.walkTokens&&this.walkTokens(e,r.walkTokens);let n=o(e,r);return r.hooks&&(n=r.hooks.postprocess(n)),n}catch(l){return i(l)}};return t}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+mt(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}}const Et=new Rt;function Ct(e,t){return Et.parse(e,t)}Ct.options=Ct.setOptions=function(e){return Et.setOptions(e),Ct.defaults=Et.defaults,ie(Ct.defaults),Ct},Ct.getDefaults=se,Ct.defaults=re,Ct.use=function(...e){return Et.use(...e),Ct.defaults=Et.defaults,ie(Ct.defaults),Ct},Ct.walkTokens=function(e,t){return Et.walkTokens(e,t)},Ct.parseInline=Et.parseInline,Ct.Parser=_t,Ct.parser=_t.parse,Ct.Renderer=vt,Ct.TextRenderer=St,Ct.Lexer=Tt,Ct.lexer=Tt.lex,Ct.Tokenizer=yt,Ct.Hooks=At,Ct.parse=Ct;Ct.options,Ct.setOptions,Ct.use,Ct.walkTokens,Ct.parseInline;const Lt=Ct,{entries:It,setPrototypeOf:Dt,isFrozen:Nt,getPrototypeOf:Mt,getOwnPropertyDescriptor:zt}=(_t.parse,Tt.lex,Object);let{freeze:Ft,seal:$t,create:Ot}=Object,{apply:Pt,construct:Ut}="undefined"!==typeof Reflect&&Reflect;Ft||(Ft=function(e){return e}),$t||($t=function(e){return e}),Pt||(Pt=function(e,t,n){return e.apply(t,n)}),Ut||(Ut=function(e,t){return new e(...t)});const Bt=tn(Array.prototype.forEach),Ht=tn(Array.prototype.lastIndexOf),qt=tn(Array.prototype.pop),Vt=tn(Array.prototype.push),Zt=tn(Array.prototype.splice),Wt=tn(String.prototype.toLowerCase),Gt=tn(String.prototype.toString),jt=tn(String.prototype.match),Kt=tn(String.prototype.replace),Xt=tn(String.prototype.indexOf),Yt=tn(String.prototype.trim),Qt=tn(Object.prototype.hasOwnProperty),Jt=tn(RegExp.prototype.test),en=nn(TypeError);function tn(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return Pt(e,t,s)}}function nn(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return Ut(e,n)}}function sn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wt;Dt&&Dt(e,null);let s=t.length;while(s--){let r=t[s];if("string"===typeof r){const e=n(r);e!==r&&(Nt(t)||(t[s]=e),r=e)}e[r]=!0}return e}function rn(e){for(let t=0;t<e.length;t++){const n=Qt(e,t);n||(e[t]=null)}return e}function an(e){const t=Ot(null);for(const[n,s]of It(e)){const r=Qt(e,n);r&&(Array.isArray(s)?t[n]=rn(s):s&&"object"===typeof s&&s.constructor===Object?t[n]=an(s):t[n]=s)}return t}function on(e,t){while(null!==e){const n=zt(e,t);if(n){if(n.get)return tn(n.get);if("function"===typeof n.value)return tn(n.value)}e=Mt(e)}function n(){return null}return n}const ln=Ft(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cn=Ft(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),un=Ft(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pn=Ft(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hn=Ft(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dn=Ft(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mn=Ft(["#text"]),gn=Ft(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),fn=Ft(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),kn=Ft(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),bn=Ft(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),xn=$t(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wn=$t(/<%[\w\W]*|[\w\W]*%>/gm),yn=$t(/\$\{[\w\W]*/gm),Tn=$t(/^data-[\-\w.\u00B7-\uFFFF]+$/),vn=$t(/^aria-[\-\w]+$/),Sn=$t(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_n=$t(/^(?:\w+script|data):/i),An=$t(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Rn=$t(/^html$/i),En=$t(/^[a-z][.\w]*(-[.\w]+)+$/i);var Cn=Object.freeze({__proto__:null,ARIA_ATTR:vn,ATTR_WHITESPACE:An,CUSTOM_ELEMENT:En,DATA_ATTR:Tn,DOCTYPE_NAME:Rn,ERB_EXPR:wn,IS_ALLOWED_URI:Sn,IS_SCRIPT_OR_DATA:_n,MUSTACHE_EXPR:xn,TMPLIT_EXPR:yn});const Ln={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},In=function(){return"undefined"===typeof window?null:window},Dn=function(e,t){if("object"!==typeof e||"function"!==typeof e.createPolicy)return null;let n=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(n=t.getAttribute(s));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML(e){return e},createScriptURL(e){return e}})}catch(i){return console.warn("TrustedTypes policy "+r+" could not be created."),null}},Nn=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:In();const t=e=>Mn(e);if(t.version="3.2.5",t.removed=[],!e||!e.document||e.document.nodeType!==Ln.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const s=n,r=s.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:d}=e,m=l.prototype,g=on(m,"cloneNode"),f=on(m,"remove"),k=on(m,"nextSibling"),b=on(m,"childNodes"),x=on(m,"parentNode");if("function"===typeof a){const e=n.createElement("template");e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let w,y="";const{implementation:T,createNodeIterator:v,createDocumentFragment:S,getElementsByTagName:_}=n,{importNode:A}=s;let R=Nn();t.isSupported="function"===typeof It&&"function"===typeof x&&T&&void 0!==T.createHTMLDocument;const{MUSTACHE_EXPR:E,ERB_EXPR:C,TMPLIT_EXPR:L,DATA_ATTR:I,ARIA_ATTR:D,IS_SCRIPT_OR_DATA:N,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:z}=Cn;let{IS_ALLOWED_URI:F}=Cn,$=null;const O=sn({},[...ln,...cn,...un,...hn,...mn]);let P=null;const U=sn({},[...gn,...fn,...kn,...bn]);let B=Object.seal(Ot(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,q=null,V=!0,Z=!0,W=!1,G=!0,j=!1,K=!0,X=!1,Y=!1,Q=!1,J=!1,ee=!1,te=!1,ne=!0,se=!1;const re="user-content-";let ie=!0,ae=!1,oe={},le=null;const ce=sn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ue=null;const pe=sn({},["audio","video","img","source","image","track"]);let he=null;const de=sn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),me="http://www.w3.org/1998/Math/MathML",ge="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml";let ke=fe,be=!1,xe=null;const we=sn({},[me,ge,fe],Gt);let ye=sn({},["mi","mo","mn","ms","mtext"]),Te=sn({},["annotation-xml"]);const ve=sn({},["title","style","font","a","script"]);let Se=null;const _e=["application/xhtml+xml","text/html"],Ae="text/html";let Re=null,Ee=null;const Ce=n.createElement("form"),Le=function(e){return e instanceof RegExp||e instanceof Function},Ie=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ee||Ee!==e){if(e&&"object"===typeof e||(e={}),e=an(e),Se=-1===_e.indexOf(e.PARSER_MEDIA_TYPE)?Ae:e.PARSER_MEDIA_TYPE,Re="application/xhtml+xml"===Se?Gt:Wt,$=Qt(e,"ALLOWED_TAGS")?sn({},e.ALLOWED_TAGS,Re):O,P=Qt(e,"ALLOWED_ATTR")?sn({},e.ALLOWED_ATTR,Re):U,xe=Qt(e,"ALLOWED_NAMESPACES")?sn({},e.ALLOWED_NAMESPACES,Gt):we,he=Qt(e,"ADD_URI_SAFE_ATTR")?sn(an(de),e.ADD_URI_SAFE_ATTR,Re):de,ue=Qt(e,"ADD_DATA_URI_TAGS")?sn(an(pe),e.ADD_DATA_URI_TAGS,Re):pe,le=Qt(e,"FORBID_CONTENTS")?sn({},e.FORBID_CONTENTS,Re):ce,H=Qt(e,"FORBID_TAGS")?sn({},e.FORBID_TAGS,Re):{},q=Qt(e,"FORBID_ATTR")?sn({},e.FORBID_ATTR,Re):{},oe=!!Qt(e,"USE_PROFILES")&&e.USE_PROFILES,V=!1!==e.ALLOW_ARIA_ATTR,Z=!1!==e.ALLOW_DATA_ATTR,W=e.ALLOW_UNKNOWN_PROTOCOLS||!1,G=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,j=e.SAFE_FOR_TEMPLATES||!1,K=!1!==e.SAFE_FOR_XML,X=e.WHOLE_DOCUMENT||!1,J=e.RETURN_DOM||!1,ee=e.RETURN_DOM_FRAGMENT||!1,te=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,ne=!1!==e.SANITIZE_DOM,se=e.SANITIZE_NAMED_PROPS||!1,ie=!1!==e.KEEP_CONTENT,ae=e.IN_PLACE||!1,F=e.ALLOWED_URI_REGEXP||Sn,ke=e.NAMESPACE||fe,ye=e.MATHML_TEXT_INTEGRATION_POINTS||ye,Te=e.HTML_INTEGRATION_POINTS||Te,B=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Le(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(B.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Le(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(B.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(B.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),j&&(Z=!1),ee&&(J=!0),oe&&($=sn({},mn),P=[],!0===oe.html&&(sn($,ln),sn(P,gn)),!0===oe.svg&&(sn($,cn),sn(P,fn),sn(P,bn)),!0===oe.svgFilters&&(sn($,un),sn(P,fn),sn(P,bn)),!0===oe.mathMl&&(sn($,hn),sn(P,kn),sn(P,bn))),e.ADD_TAGS&&($===O&&($=an($)),sn($,e.ADD_TAGS,Re)),e.ADD_ATTR&&(P===U&&(P=an(P)),sn(P,e.ADD_ATTR,Re)),e.ADD_URI_SAFE_ATTR&&sn(he,e.ADD_URI_SAFE_ATTR,Re),e.FORBID_CONTENTS&&(le===ce&&(le=an(le)),sn(le,e.FORBID_CONTENTS,Re)),ie&&($["#text"]=!0),X&&sn($,["html","head","body"]),$.table&&(sn($,["tbody"]),delete H.tbody),e.TRUSTED_TYPES_POLICY){if("function"!==typeof e.TRUSTED_TYPES_POLICY.createHTML)throw en('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!==typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw en('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,y=w.createHTML("")}else void 0===w&&(w=Dn(d,r)),null!==w&&"string"===typeof y&&(y=w.createHTML(""));Ft&&Ft(e),Ee=e}},De=sn({},[...cn,...un,...pn]),Ne=sn({},[...hn,...dn]),Me=function(e){let t=x(e);t&&t.tagName||(t={namespaceURI:ke,tagName:"template"});const n=Wt(e.tagName),s=Wt(t.tagName);return!!xe[e.namespaceURI]&&(e.namespaceURI===ge?t.namespaceURI===fe?"svg"===n:t.namespaceURI===me?"svg"===n&&("annotation-xml"===s||ye[s]):Boolean(De[n]):e.namespaceURI===me?t.namespaceURI===fe?"math"===n:t.namespaceURI===ge?"math"===n&&Te[s]:Boolean(Ne[n]):e.namespaceURI===fe?!(t.namespaceURI===ge&&!Te[s])&&(!(t.namespaceURI===me&&!ye[s])&&(!Ne[n]&&(ve[n]||!De[n]))):!("application/xhtml+xml"!==Se||!xe[e.namespaceURI]))},ze=function(e){Vt(t.removed,{element:e});try{x(e).removeChild(e)}catch(n){f(e)}},Fe=function(e,n){try{Vt(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch(s){Vt(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),"is"===e)if(J||ee)try{ze(n)}catch(s){}else try{n.setAttribute(e,"")}catch(s){}},$e=function(e){let t=null,s=null;if(Q)e="<remove></remove>"+e;else{const t=jt(e,/^[\r\n\t ]+/);s=t&&t[0]}"application/xhtml+xml"===Se&&ke===fe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=w?w.createHTML(e):e;if(ke===fe)try{t=(new h).parseFromString(r,Se)}catch(a){}if(!t||!t.documentElement){t=T.createDocument(ke,"template",null);try{t.documentElement.innerHTML=be?y:r}catch(a){}}const i=t.body||t.documentElement;return e&&s&&i.insertBefore(n.createTextNode(s),i.childNodes[0]||null),ke===fe?_.call(t,X?"html":"body")[0]:X?t.documentElement:i},Oe=function(e){return v.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Pe=function(e){return e instanceof p&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof u)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore||"function"!==typeof e.hasChildNodes)},Ue=function(e){return"function"===typeof o&&e instanceof o};function Be(e,n,s){Bt(e,(e=>{e.call(t,n,s,Ee)}))}const He=function(e){let n=null;if(Be(R.beforeSanitizeElements,e,null),Pe(e))return ze(e),!0;const s=Re(e.nodeName);if(Be(R.uponSanitizeElement,e,{tagName:s,allowedTags:$}),e.hasChildNodes()&&!Ue(e.firstElementChild)&&Jt(/<[/\w!]/g,e.innerHTML)&&Jt(/<[/\w!]/g,e.textContent))return ze(e),!0;if(e.nodeType===Ln.progressingInstruction)return ze(e),!0;if(K&&e.nodeType===Ln.comment&&Jt(/<[/\w]/g,e.data))return ze(e),!0;if(!$[s]||H[s]){if(!H[s]&&Ve(s)){if(B.tagNameCheck instanceof RegExp&&Jt(B.tagNameCheck,s))return!1;if(B.tagNameCheck instanceof Function&&B.tagNameCheck(s))return!1}if(ie&&!le[s]){const t=x(e)||e.parentNode,n=b(e)||e.childNodes;if(n&&t){const s=n.length;for(let r=s-1;r>=0;--r){const s=g(n[r],!0);s.__removalCount=(e.__removalCount||0)+1,t.insertBefore(s,k(e))}}}return ze(e),!0}return e instanceof l&&!Me(e)?(ze(e),!0):"noscript"!==s&&"noembed"!==s&&"noframes"!==s||!Jt(/<\/no(script|embed|frames)/i,e.innerHTML)?(j&&e.nodeType===Ln.text&&(n=e.textContent,Bt([E,C,L],(e=>{n=Kt(n,e," ")})),e.textContent!==n&&(Vt(t.removed,{element:e.cloneNode()}),e.textContent=n)),Be(R.afterSanitizeElements,e,null),!1):(ze(e),!0)},qe=function(e,t,s){if(ne&&("id"===t||"name"===t)&&(s in n||s in Ce))return!1;if(Z&&!q[t]&&Jt(I,t));else if(V&&Jt(D,t));else if(!P[t]||q[t]){if(!(Ve(e)&&(B.tagNameCheck instanceof RegExp&&Jt(B.tagNameCheck,e)||B.tagNameCheck instanceof Function&&B.tagNameCheck(e))&&(B.attributeNameCheck instanceof RegExp&&Jt(B.attributeNameCheck,t)||B.attributeNameCheck instanceof Function&&B.attributeNameCheck(t))||"is"===t&&B.allowCustomizedBuiltInElements&&(B.tagNameCheck instanceof RegExp&&Jt(B.tagNameCheck,s)||B.tagNameCheck instanceof Function&&B.tagNameCheck(s))))return!1}else if(he[t]);else if(Jt(F,Kt(s,M,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Xt(s,"data:")||!ue[e]){if(W&&!Jt(N,Kt(s,M,"")));else if(s)return!1}else;return!0},Ve=function(e){return"annotation-xml"!==e&&jt(e,z)},Ze=function(e){Be(R.beforeSanitizeAttributes,e,null);const{attributes:n}=e;if(!n||Pe(e))return;const s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:P,forceKeepAttr:void 0};let r=n.length;while(r--){const a=n[r],{name:o,namespaceURI:l,value:c}=a,u=Re(o);let p="value"===o?c:Yt(c);if(s.attrName=u,s.attrValue=p,s.keepAttr=!0,s.forceKeepAttr=void 0,Be(R.uponSanitizeAttribute,e,s),p=s.attrValue,!se||"id"!==u&&"name"!==u||(Fe(o,e),p=re+p),K&&Jt(/((--!?|])>)|<\/(style|title)/i,p)){Fe(o,e);continue}if(s.forceKeepAttr)continue;if(Fe(o,e),!s.keepAttr)continue;if(!G&&Jt(/\/>/i,p)){Fe(o,e);continue}j&&Bt([E,C,L],(e=>{p=Kt(p,e," ")}));const h=Re(e.nodeName);if(qe(h,u,p)){if(w&&"object"===typeof d&&"function"===typeof d.getAttributeType)if(l);else switch(d.getAttributeType(h,u)){case"TrustedHTML":p=w.createHTML(p);break;case"TrustedScriptURL":p=w.createScriptURL(p);break}try{l?e.setAttributeNS(l,o,p):e.setAttribute(o,p),Pe(e)?ze(e):qt(t.removed)}catch(i){}}}Be(R.afterSanitizeAttributes,e,null)},We=function e(t){let n=null;const s=Oe(t);Be(R.beforeSanitizeShadowDOM,t,null);while(n=s.nextNode())Be(R.uponSanitizeShadowNode,n,null),He(n),Ze(n),n.content instanceof i&&e(n.content);Be(R.afterSanitizeShadowDOM,t,null)};return t.sanitize=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,a=null,l=null,c=null;if(be=!e,be&&(e="\x3c!--\x3e"),"string"!==typeof e&&!Ue(e)){if("function"!==typeof e.toString)throw en("toString is not a function");if(e=e.toString(),"string"!==typeof e)throw en("dirty is not a string, aborting")}if(!t.isSupported)return e;if(Y||Ie(n),t.removed=[],"string"===typeof e&&(ae=!1),ae){if(e.nodeName){const t=Re(e.nodeName);if(!$[t]||H[t])throw en("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof o)r=$e("\x3c!----\x3e"),a=r.ownerDocument.importNode(e,!0),a.nodeType===Ln.element&&"BODY"===a.nodeName||"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!J&&!j&&!X&&-1===e.indexOf("<"))return w&&te?w.createHTML(e):e;if(r=$e(e),!r)return J?null:te?y:""}r&&Q&&ze(r.firstChild);const u=Oe(ae?e:r);while(l=u.nextNode())He(l),Ze(l),l.content instanceof i&&We(l.content);if(ae)return e;if(J){if(ee){c=S.call(r.ownerDocument);while(r.firstChild)c.appendChild(r.firstChild)}else c=r;return(P.shadowroot||P.shadowrootmode)&&(c=A.call(s,c,!0)),c}let p=X?r.outerHTML:r.innerHTML;return X&&$["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&Jt(Rn,r.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+p),j&&Bt([E,C,L],(e=>{p=Kt(p,e," ")})),w&&te?w.createHTML(p):p},t.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ie(e),Y=!0},t.clearConfig=function(){Ee=null,Y=!1},t.isValidAttribute=function(e,t,n){Ee||Ie({});const s=Re(e),r=Re(t);return qe(s,r,n)},t.addHook=function(e,t){"function"===typeof t&&Vt(R[e],t)},t.removeHook=function(e,t){if(void 0!==t){const n=Ht(R[e],t);return-1===n?void 0:Zt(R[e],n,1)[0]}return qt(R[e])},t.removeHooks=function(e){R[e]=[]},t.removeAllHooks=function(){R=Nn()},t}var zn,Fn=Mn(),$n=new Uint8Array(16);function On(){if(!zn&&(zn="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!zn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zn($n)}var Pn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Un(e){return"string"===typeof e&&Pn.test(e)}for(var Bn=Un,Hn=[],qn=0;qn<256;++qn)Hn.push((qn+256).toString(16).substr(1));function Vn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Hn[e[t+0]]+Hn[e[t+1]]+Hn[e[t+2]]+Hn[e[t+3]]+"-"+Hn[e[t+4]]+Hn[e[t+5]]+"-"+Hn[e[t+6]]+Hn[e[t+7]]+"-"+Hn[e[t+8]]+Hn[e[t+9]]+"-"+Hn[e[t+10]]+Hn[e[t+11]]+Hn[e[t+12]]+Hn[e[t+13]]+Hn[e[t+14]]+Hn[e[t+15]]).toLowerCase();if(!Bn(n))throw TypeError("Stringified UUID is invalid");return n}var Zn=Vn;function Wn(e,t,n){e=e||{};var s=e.random||(e.rng||On)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=s[r];return t}return Zn(s)}var Gn=Wn,jn=n(7477),Kn={name:"ChatView",components:{"icon-plus":jn.Plus,"icon-search":jn.Search,"icon-chat-dot-round":jn.ChatDotRound,"icon-more":jn.More,"icon-data-line":jn.DataLine,"icon-monitor":jn.Monitor,"icon-delete":jn.Delete,"icon-chat-square":jn.ChatSquare,"icon-user":jn.User,"icon-cpu":jn.Cpu,"icon-document-copy":jn.DocumentCopy,"icon-thumb-up":jn.ThumbUp,"icon-thumb-down":jn.ThumbDown,"icon-upload":jn.Upload,"icon-microphone":jn.Microphone,"icon-position":jn.Position},setup(){(0,X.rd)();const e=(0,K.KR)(""),t=(0,K.KR)(!1),n=(0,K.KR)(""),r=(0,K.KR)(null),i=(0,K.KR)(""),a=(0,K.KR)(!1),o=(0,K.KR)(null),l=(0,K.KR)(!1),c=(0,K.KR)([{id:1,name:"生产环境MySQL",type:"MySQL"},{id:2,name:"测试环境PostgreSQL",type:"PostgreSQL"},{id:3,name:"开发环境SQL Server",type:"SQLServer"},{id:4,name:"历史数据Oracle",type:"Oracle"}]),u=(0,K.KR)([1]),p=(0,K.KR)(!1),h=(0,K.KR)([{id:1,name:"GPT-4",type:"通用模型"},{id:2,name:"Claude 3",type:"通用模型"},{id:3,name:"LLaMA 3",type:"开源模型"},{id:4,name:"FinBERT",type:"金融专用模型"}]),d=(0,K.KR)(1),m=(0,K.KR)([{id:1,title:"新建会话",createdAt:"2023-11-10T08:30:00Z",updatedAt:"2023-11-10T08:45:00Z",messageCount:5,messages:[{id:101,role:"user",content:"你好，请查询一下我们的销售数据",timestamp:"2023-11-10T08:30:00Z"},{id:102,role:"assistant",content:"您好！我可以帮您查询销售数据。请问您需要查询哪个时间段、哪个地区或产品的销售数据呢？",timestamp:"2023-11-10T08:30:10Z"},{id:103,role:"user",content:"查询2023年10月的销售额",timestamp:"2023-11-10T08:31:00Z"},{id:104,role:"assistant",content:"我已查询到2023年10月的销售数据：\n\n总销售额：¥1,258,750\n同比增长：14.5%\n\n各产品线销售情况：\n- 数据服务：¥528,300 (42%)\n- 云存储：¥356,200 (28%)\n- 安全产品：¥245,600 (19%)\n- 其他服务：¥128,650 (11%)\n\n需要我为您提供更详细的分析吗？",timestamp:"2023-11-10T08:31:15Z"},{id:105,role:"user",content:"帮我分析一下销售趋势",timestamp:"2023-11-10T08:44:00Z"}],dataSourceIds:[1],modelId:1},{id:2,title:"数据库查询示例",createdAt:"2023-11-09T10:15:00Z",updatedAt:"2023-11-09T10:30:00Z",messageCount:3,messages:[],dataSourceIds:[1,2],modelId:1},{id:3,title:"财务数据分析",createdAt:"2023-11-08T14:20:00Z",updatedAt:"2023-11-08T15:45:00Z",messageCount:8,messages:[],dataSourceIds:[4],modelId:4}]),g=(0,K.KR)({...m.value[0]}),f=(0,s.EW)((()=>{if(!e.value)return m.value;const t=e.value.toLowerCase();return m.value.filter((e=>e.title.toLowerCase().includes(t)))})),k=()=>{const e={id:Gn(),title:`新建会话 ${m.value.length+1}`,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),messageCount:0,messages:[],dataSourceIds:[u.value[0]],modelId:d.value};m.value.unshift(e),g.value={...e},i.value=""},b=e=>{e.id!==g.value.id&&(u.value=e.dataSourceIds||[1],d.value=e.modelId||1,g.value={...e},e.messages&&0!==e.messages.length||x(e.id),(0,s.dY)((()=>{F()})))},x=e=>{const t=m.value.findIndex((t=>t.id===e));-1!==t&&setTimeout((()=>{2===e?(m.value[t].messages=[{id:201,role:"user",content:"查询用户表的结构",timestamp:"2023-11-09T10:15:00Z"},{id:202,role:"assistant",content:"用户表(users)的结构如下：\n\n| 字段名 | 类型 | 说明 |\n| --- | --- | --- |\n| id | INT | 主键，自增 |\n| username | VARCHAR(50) | 用户名 |\n| email | VARCHAR(100) | 邮箱地址 |\n| password_hash | VARCHAR(128) | 密码哈希值 |\n| created_at | TIMESTAMP | 创建时间 |\n| status | TINYINT | 状态：1-活跃，0-禁用 |",timestamp:"2023-11-09T10:15:10Z"},{id:203,role:"user",content:"统计各状态的用户数量",timestamp:"2023-11-09T10:20:00Z"}],g.value={...m.value[t]}):3===e&&(m.value[t].messages=[{id:301,role:"user",content:"分析2023年第三季度的财务状况",timestamp:"2023-11-08T14:20:00Z"},{id:302,role:"assistant",content:"2023年第三季度财务分析：\n\n**收入**：¥8,750,000\n**支出**：¥6,120,000\n**利润**：¥2,630,000\n**利润率**：30.1%\n\n与去年同期相比：\n- 收入增长：18.5%\n- 支出增长：12.3%\n- 利润增长：35.8%\n- 利润率提升：3.9个百分点\n\n主要收入来源：\n1. 产品销售：65%\n2. 服务订阅：25%\n3. 咨询服务：10%",timestamp:"2023-11-08T14:20:30Z"},{id:303,role:"user",content:"请生成一个可视化图表展示这些数据",timestamp:"2023-11-08T14:45:00Z"}],g.value={...m.value[t]})}),500)},w=async()=>{if(!i.value.trim())return;const e={id:Gn(),role:"user",content:i.value,timestamp:(new Date).toISOString()};g.value.messages.push(e);const t=m.value.findIndex((e=>e.id===g.value.id));-1!==t&&(m.value[t].messages=[...g.value.messages],m.value[t].messageCount=g.value.messages.length,m.value[t].updatedAt=(new Date).toISOString()),i.value="",(0,s.dY)((()=>{F()})),a.value=!0;try{await new Promise((e=>setTimeout(e,1500)));const n={id:Gn(),role:"assistant",content:await y(e.content),timestamp:(new Date).toISOString()};g.value.messages.push(n),-1!==t&&(m.value[t].messages=[...g.value.messages],m.value[t].messageCount=g.value.messages.length,m.value[t].updatedAt=(new Date).toISOString()),a.value=!1,(0,s.dY)((()=>{F()}))}catch(n){console.error("获取AI回复失败",n),a.value=!1,Y.nk.error("获取回复失败，请重试")}},y=async e=>{const t=e.toLowerCase();return t.includes("数据库")||t.includes("表")||t.includes("查询")?"根据您的数据库查询，我找到了以下信息：\n\n```sql\nSELECT * FROM users WHERE status = 1;\n```\n\n查询结果显示有1,205个活跃用户，占总用户数的87.3%。非活跃用户有175个，占比12.7%。\n\n需要了解更详细的用户数据吗？":t.includes("销售")||t.includes("营收")||t.includes("业绩")?"2023年的销售数据分析如下：\n\n- 第一季度：¥3,456,000，同比增长15.2%\n- 第二季度：¥4,127,000，同比增长18.7%\n- 第三季度：¥4,890,000，同比增长21.3%\n- 第四季度：预计¥5,200,000，预计同比增长23.5%\n\n主要增长点来自于云服务和数据分析产品线。您需要查看更详细的产品线分析吗？":t.includes("图表")||t.includes("可视化")||t.includes("展示")?'以下是基于您请求的数据可视化结果：\n\n```chart\n{\n  "type": "bar",\n  "data": {\n    "labels": ["Q1", "Q2", "Q3", "Q4"],\n    "datasets": [{\n      "label": "2023年季度销售额(万元)",\n      "data": [345.6, 412.7, 489.0, 520.0]\n    }]\n  }\n}\n```\n\n您还需要其他类型的图表吗？例如饼图、折线图等。':'我理解您的问题是关于"'+e+'"。请问您需要查询哪些具体信息？您可以：\n\n1. 查询特定数据库表的结构和内容\n2. 分析业务数据和趋势\n3. 生成数据报表和可视化\n\n请告诉我您需要深入了解哪个方面的信息。'},T=e=>{navigator.clipboard.writeText(e.content).then((()=>{(0,Y.nk)({message:"已复制到剪贴板",type:"success"})})).catch((()=>{Y.nk.error("复制失败")}))},v=(e,t)=>{(0,Y.nk)({message:"like"===t?"感谢您的肯定！":"感谢您的反馈，我们会继续改进",type:"like"===t?"success":"warning"})},S=()=>{Q.s.confirm("确定要清空当前会话的所有消息吗？此操作不可撤销","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{g.value.messages=[];const e=m.value.findIndex((e=>e.id===g.value.id));-1!==e&&(m.value[e].messages=[],m.value[e].messageCount=0,m.value[e].updatedAt=(new Date).toISOString()),(0,Y.nk)({type:"success",message:"会话已清空"})})).catch((()=>{}))},_=(e,s)=>{switch(e){case"rename":r.value=s,n.value=s.title,t.value=!0;break;case"export":R(s);break;case"delete":E(s);break}},A=()=>{if(!n.value.trim())return void Y.nk.warning("会话名称不能为空");const e=m.value.findIndex((e=>e.id===r.value.id));-1!==e&&(m.value[e].title=n.value,g.value.id===r.value.id&&(g.value.title=n.value),(0,Y.nk)({message:"重命名成功",type:"success"})),t.value=!1},R=e=>{const t={title:e.title,createdAt:e.createdAt,updatedAt:e.updatedAt,messages:e.messages},n=JSON.stringify(t,null,2),s="data:application/json;charset=utf-8,"+encodeURIComponent(n),r=`chat-${e.title}-${(new Date).toISOString().split("T")[0]}.json`,i=document.createElement("a");i.setAttribute("href",s),i.setAttribute("download",r),i.click(),(0,Y.nk)({message:"导出成功",type:"success"})},E=e=>{Q.s.confirm(`确定要删除会话"${e.title}"吗？此操作不可撤销`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{m.value=m.value.filter((t=>t.id!==e.id)),g.value.id===e.id&&(m.value.length>0?g.value={...m.value[0]}:k()),(0,Y.nk)({type:"success",message:"删除成功"})})).catch((()=>{}))},C=()=>{g.value.dataSourceIds=[...u.value];const e=m.value.findIndex((e=>e.id===g.value.id));-1!==e&&(m.value[e].dataSourceIds=[...u.value]),l.value=!1,(0,Y.nk)({message:"数据源配置已更新",type:"success"})},L=()=>{g.value.modelId=d.value;const e=m.value.findIndex((e=>e.id===g.value.id));-1!==e&&(m.value[e].modelId=d.value),p.value=!1,(0,Y.nk)({message:"模型配置已更新",type:"success"})},I=()=>{(0,Y.nk)({message:"文件上传功能正在开发中",type:"info"})},D=()=>{(0,Y.nk)({message:"语音输入功能正在开发中",type:"info"})},N=e=>{if(!e)return"";const t=new Date(e),n=new Date;if(t.toDateString()===n.toDateString())return t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});const s=new Date(n);return s.setDate(n.getDate()-1),t.toDateString()===s.toDateString()?"昨天 "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.getFullYear()===n.getFullYear()?t.toLocaleDateString([],{month:"2-digit",day:"2-digit"}):t.toLocaleDateString()},M=e=>{if(!e)return"";const t=new Date(e);return t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},z=e=>{if(!e)return"";const t=Lt(e);return Fn.sanitize(t)},F=()=>{o.value&&(o.value.scrollTop=o.value.scrollHeight)};return(0,s.wB)((()=>g.value.messages),(()=>{(0,s.dY)((()=>{F()}))}),{deep:!0}),(0,s.sV)((()=>{(0,s.dY)((()=>{F()}))})),{searchKeyword:e,messageInput:i,isTyping:a,renameDialogVisible:t,newSessionTitle:n,showDataSourcePanel:l,showModelPanel:p,messageContainer:o,sessions:m,filteredSessions:f,currentSession:g,availableDataSources:c,selectedDataSources:u,availableModels:h,selectedModel:d,createNewSession:k,switchSession:b,sendMessage:w,copyMessage:T,rateMessage:v,clearMessages:S,handleSessionAction:_,confirmRename:A,confirmDataSources:C,confirmModel:L,uploadFile:I,toggleVoiceInput:D,formatDate:N,formatTime:M,formatMessage:z,scrollToBottom:F}}},Xn=n(1241);const Yn=(0,Xn.A)(Kn,[["render",j]]);var Qn=Yn}}]);
//# sourceMappingURL=481.e482bcf7.js.map